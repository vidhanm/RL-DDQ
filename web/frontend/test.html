<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Agent | DDQ</title>
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    <link rel="stylesheet" href="/static/css/styles.css?v=final">
    <style>
        .test-hero {
            text-align: center;
            padding: 40px 0 20px;
        }

        .test-hero h2 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, #fff 30%, hsl(30, 90%, 60%));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .test-hero p {
            color: var(--text-muted);
        }

        .test-input-area {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .test-input-area input {
            flex: 1;
            padding: 16px 20px;
            font-size: 1rem;
        }

        .test-input-area button {
            min-width: 120px;
        }
    </style>
</head>

<body>
    <!-- Header with Navigation -->
    <header class="header">
        <h1>DDQ <span style="font-weight: 300; opacity: 0.7;">Test</span></h1>
        <nav class="main-nav">
            <a href="/" class="nav-link">Demo</a>
            <a href="/train" class="nav-link">Train</a>
            <a href="/evaluate" class="nav-link">Evaluate</a>
            <a href="/test" class="nav-link active">Test</a>
            <a href="/adversarial" class="nav-link">⚔️ Adversarial</a>
        </nav>
    </header>

    <div class="container">

        <!-- Hero -->
        <div class="test-hero">
            <h2>Test Agent</h2>
            <p>Manually interact with a trained agent checkpoint</p>
        </div>

        <!-- Control Panel -->
        <section class="control-panel">
            <h3>Test Configuration</h3>
            <div class="control-row">
                <div class="control-group">
                    <label>Checkpoint</label>
                    <select id="checkpoint-select">
                        <option value="">Loading checkpoints...</option>
                    </select>
                </div>
                <div class="control-group">
                    <label>Difficulty</label>
                    <select id="difficulty-select">
                        <option value="random">Random</option>
                        <option value="easy">Easy</option>
                        <option value="medium">Medium</option>
                        <option value="hard">Hard</option>
                    </select>
                </div>

                <div style="flex: 1;"></div>

                <button id="start-test-btn" class="success">Start Test</button>
                <button id="reset-test-btn" class="secondary">Reset</button>
            </div>
        </section>

        <!-- Status Bar -->
        <div id="status-bar" class="status-bar">
            Select a checkpoint and start testing
        </div>

        <!-- Main Content -->
        <main class="main-grid">
            <!-- Left Column: Conversation -->
            <div class="panel">
                <div class="panel-header">
                    <span>Conversation</span>
                    <span id="episode-status" style="font-size: 0.8rem; opacity: 0.7;">Not started</span>
                </div>
                <div id="chat-container" class="chat-container">
                    <div
                        style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; opacity: 0.4;">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="1" style="margin-bottom: 15px;">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                        </svg>
                        <p style="font-size: 0.9rem;">Start a test to begin conversation</p>
                    </div>
                </div>
                <div class="action-controls">
                    <input type="text" id="user-message" placeholder="Type your response..." disabled>
                    <button id="send-btn" disabled>Send</button>
                </div>
            </div>

            <!-- Right Column: State & Info -->
            <div style="display: flex; flex-direction: column; gap: 20px;">
                <div class="panel">
                    <div class="panel-header">Agent Info</div>
                    <div id="agent-info" class="panel-body">
                        <p style="color: var(--text-muted); text-align: center;">No agent loaded</p>
                    </div>
                </div>
                <div class="panel" style="flex: 1;">
                    <div class="panel-header">Environment State</div>
                    <div id="state-panel" class="panel-body">
                        <p style="color: var(--text-muted); text-align: center;">No active state</p>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            DDQ Agent Test Interface
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="spinner"></div>
        <div id="loading-text" class="loading-text" style="margin-top: 20px;">Loading...</div>
    </div>

    <script src="/static/js/test.js"></script>
</body>

</html>